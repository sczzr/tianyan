# 世界地图系统使用说明

## 功能概述

这是一个模仿 RimWorld 的 512x512 像素地形地图生成系统，支持鼠标滚轮缩放和中键拖拽平移。

## 地形类型（15种）

| 地形 | 英文名称 | 颜色 |
|------|----------|------|
| 海洋 | Ocean | 深蓝色 |
| 冰川海洋 | IceSheetOcean | 浅蓝色 |
| 冰原 | IceSheet | 白色 |
| 苔原 | Tundra | 浅灰色 |
| 寒带森林 | BorealForest | 深绿色 |
| 寒带沼泽 | ColdBog | 暗绿色 |
| 温带森林 | TemperateForest | 绿色 |
| 温带沼泽 | TemperateSwamp | 灰绿色 |
| 热带雨林 | TropicalRainforest | 深绿色 |
| 热带沼泽 | TropicalSwamp | 橄榄绿 |
| 灌木地 | AridShrubland | 黄绿色 |
| 沙漠 | Desert | 沙色 |
| 极热沙漠 | ExtremeDesert | 浅沙色 |

## 操作方法

### 缩放地图
- **鼠标滚轮向上** → 放大地图
- **鼠标滚轮向下** → 缩小地图
- 缩放范围：25% ~ 400%

### 平移视角
- **按住鼠标中键** + 拖动 → 移动视角

### 重新生成地图
- 点击界面左上角的 **"重新生成地图"** 按钮

## 生成算法

地图使用 Simplex 噪声算法生成，考虑以下因素：

1. **高度 (Height)**: 决定水域和陆地分布
2. **温度 (Temperature)**: 基于纬度（Y坐标）+ 噪声
3. **湿度 (Moisture)**: 影响森林/沼泽/沙漠的形成

地形判定逻辑模仿 RimWorld，根据这三个参数的组合确定每个格子的地形类型。

## 代码文件

- `Scripts/WorldMapManager.cs` - 地图管理器核心代码
- `Scenes/WorldMap.tscn` - 地图场景文件
- `Scenes/MainGame.tscn` - 已集成到主游戏场景

## 自定义参数

在 Godot 编辑器中选择 WorldMap 节点，可以调整以下参数：

- **MapWidth/MapHeight**: 地图尺寸（默认 512x512）
- **NoiseScale**: 噪声缩放（影响地形平滑度）
- **Octaves**: 噪声叠加层数
- **Persistence**: 噪声 Persistence
- **Lacunarity**: 噪声 Lacunarity

## 注意事项

1. 512x512 地图生成需要几秒钟时间，请耐心等待
2. 缩放级别过低可能会看到像素边缘
3. 中键拖拽时如果感觉卡顿，可以减小地图尺寸或降低预览分辨率
