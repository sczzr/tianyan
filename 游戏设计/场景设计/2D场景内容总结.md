# 天衍峰：修仙商铺 - 2D场景内容总结

## 已创建的场景文件

### 1. TianYanMainPeak.tscn - 天衍峰主峰（基础版）
**文件路径**: `Scenes/Locations/TianYanMainPeak.tscn`

#### 场景内容
- **背景层**: 青灰色渐变背景，营造山峰氛围
- **TileMap**: 4层瓦片地图（地面、道路、建筑、细节）
- **环境标记点**:
  - 阵研阁 (ZhenYanPavilion) - 东侧山腰
  - 衍法阁 (YanFaPavilion) - 西侧山腰
  - 天工阁 (TianGongPavilion) - 南侧山腰
  - 天衍大殿 (MainHall) - 山顶
- **传送点**:
  - 前往天衍城 (ToTianYanCity)
- **NPC层**: 空的NPC容器
- **玩家控制器**: 带相机控制器的玩家角色

---

### 2. TianYanCity.tscn - 天衍城（基础版）
**文件路径**: `Scenes/Locations/TianYanCity.tscn`

#### 场景内容
- **背景层**: 深棕灰色渐变，城市氛围
- **TileMap**: 4层瓦片地图（地面、道路、建筑、细节）
- **环境标记点**:
  - 天衍大道 (TianYanAvenue) - 主街道
  - 商业区 (CommercialArea) - 商业聚集区
  - 南城门 (CityGate) - 城市入口
- **传送点**:
  - 前往天衍峰主峰 (ToTianYanCity)
- **NPC层**: 空的NPC容器
- **玩家控制器**: 带相机控制器的玩家角色

---

### 3. YunLuMarket.tscn - 云麓坊市（基础版）
**文件路径**: `Scenes/Locations/YunLuMarket.tscn`

#### 场景内容
- **背景层**: 暖棕色调，市集氛围
- **TileMap**: 4层瓦片地图（地面、道路、建筑、细节）
- **环境标记点**:
  - 东市 (EasternMarket) - 丹药灵材区
  - 西市 (WesternMarket) - 法器符箓区
  - 南区 (SouthernMarket) - 灵兽杂物区
  - 北区 (NorthernMarket) - 餐饮住宿区
  - 中央广场 (CentralPlaza) - 拍卖擂台
  - 万料会 (WanLiaoHui) - 废料回收
- **传送点**:
  - 前往天衍城 (ToTianYanCity)
- **NPC层**: 空的NPC容器
- **玩家控制器**: 带相机控制器的玩家角色

---

### 4. TianYanMainPeak_Expanded.tscn - 天衍峰主峰（扩展版）⭐
**文件路径**: `Scenes/Locations/TianYanMainPeak_Expanded.tscn`

#### 场景内容（全面升级）

##### 1. 远景背景层 (FarBackgroundLayer)
- **山脉远景 (MountainRange)**: 淡蓝色山脉剪影，视差滚动
- **星空 (StarField)**: 150颗闪烁星星，15秒生命周期
- **矩阵光轨 (ArrayLightTrails)**: 20条流动光线，贯穿山脉

##### 2. 背景层 (BackgroundLayer)
- **深青灰背景色**: 比基础版更深邃
- **灵气云雾 (GroundFog)**: 50个缓慢上升的雾气粒子
- **灵火 (SpiritLights)**: 30个漂浮的蓝色光点

##### 3. 环境标记（详细可视化）

**阵研阁 (ZhenYanPavilion)**
- 墨蓝色六边形建筑
- 发光的灵能核心
- 文字标签

**衍法阁 (YanFaPavilion)**
- 青绿色教学建筑
- 柔和的教育氛围光

**天工阁 (TianGongPavilion)**
- 金色主商业建筑
- 强烈的商业氛围光

**天衍大殿 (MainHall)**
- 紫色宏伟主殿
- 最强大的光芒

**其他派系山峰**
- 天枢峰 (TianShuPeak) - 行政中心
- 天机峰 (TianJiPeak) - 教育中心

##### 4. 阵法网络 (ArrayLightNetwork)
- 三条主要光轨连接各建筑
- 6个发光节点
- 蓝白色流光效果

##### 5. 装饰物体 (ObjectsLayer)

**装饰岩石**
- 3块不同大小的灵石
- 灰蓝色调

**灵竹**
- 3丛翠竹
- 绿色线条绘制

**阵法石碑**
- 2块可交互石碑
- 发光符文效果

##### 6. NPC (NPCLayer)

**阵法守卫1 (ArrayGuard1)**
- 蓝色盔甲外观
- 站立守卫姿态

**阵法守卫2 (ArrayGuard2)**
- 同上
- 对称位置

##### 7. 传送点 (TeleportPoints)
- 前往天衍城
- 六边形传送门
- 绿色光芒

##### 8. 玩家控制器
- 带相机的玩家
- 适合探索的相机设置

---

### 5. ShopInterior.tscn - 商铺内部（全新）⭐
**文件路径**: `Scenes/Locations/ShopInterior.tscn`

#### 场景内容

##### 1. 背景层
- **暖棕色木纹背景**: 营造温馨的购物氛围
- **柔和的环境光**: 黄色暖光
- **商铺尘埃粒子**: 缓慢飘浮的金色光点

##### 2. 商铺布局 (ShopLayout)

**柜台 (Counter)**
- 棕色木质柜台
- 柜台台面
- 柜台灯光

**货架 (LeftShelf / RightShelf)**
- 左右两侧对称货架
- 棕色木纹

**后墙 (BackWall)**
- 深色背景墙

##### 3. 商品展示 (ShopItems)

**商品1 (Item1)**
- 蓝色法器
- 蓝色光芒

**商品2 (Item2)**
- 红色丹药
- 红色光芒

**商品3 (Item3)**
- 绿色灵草
- 绿色光芒

##### 4. NPC

**掌柜 (Shopkeeper)**
- 站在柜台后
- 棕色服饰
- 头顶光源
- 可对话、可交易

##### 5. 传送点

**出口 (ExitToMainPeak)**
- 门形传送门
- 返回天衍峰
- 无需确认

##### 6. 相机设置
- 室内专用设置
- 更小的边界
- 适合小空间探索

---

## 新创建的脚本

### 1. NPCController.cs
**功能**: 完整的NPC控制系统
- 基础属性（ID、名称、描述）
- 移动AI（随机巡逻）
- 朝向控制
- 动画系统
- 对话系统
- 任务系统（给予/完成任务）
- 商人系统
- 交互高亮

### 2. InteractableObject.cs
**功能**: 可交互对象基类
- 基础属性配置
- 交互区域检测
- 高亮效果（Tween动画）
- 提示文本显示
- 物品使用检查
- 视觉反馈
- 交互状态管理

---

## 场景对比总结

| 场景 | 版本 | 特色 | 复杂度 |
|------|------|------|--------|
| TianYanMainPeak | 基础版 | 简洁框架 | ⭐⭐ |
| TianYanCity | 基础版 | 简洁框架 | ⭐⭐ |
| YunLuMarket | 基础版 | 简洁框架 | ⭐⭐ |
| **TianYanMainPeak_Expanded** | **扩展版** | **丰富视觉+完整内容** | **⭐⭐⭐⭐⭐** |
| **ShopInterior** | **全新** | **完整室内场景** | **⭐⭐⭐⭐⭐** |

---

## 推荐的使用方式

1. **开发阶段**: 使用基础版场景（轻量级，加载快）
2. **测试阶段**: 使用扩展版场景（完整体验）
3. **发布版本**: 全部使用扩展版和高质量场景

这些场景现在包含了丰富的视觉元素、可交互对象、NPC和完整的环境氛围，可以提供给玩家沉浸式的游戏体验。
