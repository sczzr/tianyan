[gd_scene format=3 uid="uid://game"]

[ext_resource type="Script" uid="uid://dwji5xe8bttmu" path="res://Scripts/Core/Game.cs" id="1_game"]
[ext_resource type="Theme" uid="uid://inkwashtheme" path="res://Themes/InkWashTheme.tres" id="2_theme"]
[ext_resource type="Script" uid="uid://dgei4p0lkynu5" path="res://Scripts/Rendering/MapView.cs" id="3_mapview"]
[ext_resource type="Script" uid="uid://dgqr4fv32gqjn" path="res://Scripts/Rendering/MapCamera.cs" id="4_mapcamera"]

[sub_resource type="StyleBoxFlat" id="DropdownPanelStyle"]
bg_color = Color(0.91, 0.835, 0.71, 0.88)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0.788, 0.722, 0.588, 1)
corner_radius_top_left = 8
corner_radius_top_right = 8
corner_radius_bottom_right = 8
corner_radius_bottom_left = 8
shadow_color = Color(0, 0, 0, 0.15)
shadow_size = 8
shadow_offset = Vector2(2, 2)

[node name="Game" type="Control" unique_id=2146714292]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_theme")
script = ExtResource("1_game")

[node name="Background" type="ColorRect" parent="." unique_id=22057012]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.961, 0.925, 0.843, 1)

[node name="MapView" type="Control" parent="." unique_id=1067976962]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("3_mapview")

[node name="MapCamera" type="Camera2D" parent="." unique_id=84237956]
anchor_mode = 0
script = ExtResource("4_mapcamera")

[node name="MenuPanel" type="PanelContainer" parent="." unique_id=124898716]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -160.0
offset_top = -220.0
offset_right = 160.0
offset_bottom = 220.0
grow_horizontal = 2
grow_vertical = 2

[node name="MenuVBox" type="VBoxContainer" parent="MenuPanel" unique_id=124898717]
layout_mode = 2
theme_override_constants/separation = 16

[node name="PausedLabel" type="Label" parent="MenuPanel/MenuVBox" unique_id=124898718]
layout_mode = 2
theme_override_colors/font_color = Color(0.173, 0.122, 0.071, 1)
theme_override_font_sizes/font_size = 32
text = "游戏已暂停"
horizontal_alignment = 1

[node name="Spacer1" type="Control" parent="MenuPanel/MenuVBox" unique_id=124898719]
custom_minimum_size = Vector2(0, 16)
layout_mode = 2

[node name="Separator1" type="HSeparator" parent="MenuPanel/MenuVBox" unique_id=124898720]
layout_mode = 2

[node name="ResumeButton" type="Button" parent="MenuPanel/MenuVBox" unique_id=124898721]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2
text = "返回游戏"

[node name="RegenerateButton" type="Button" parent="MenuPanel/MenuVBox" unique_id=124898722]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2
text = "重新生成地图"

[node name="MapViewScaleLabel" type="Label" parent="MenuPanel/MenuVBox" unique_id=124898728]
layout_mode = 2
text = "地图大小: 100%"

[node name="MapViewScaleSlider" type="HSlider" parent="MenuPanel/MenuVBox" unique_id=124898729]
custom_minimum_size = Vector2(0, 28)
layout_mode = 2
min_value = 0.05
max_value = 5.0
step = 0.05
value = 1.0

[node name="SettingsButton" type="Button" parent="MenuPanel/MenuVBox" unique_id=124898723]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2
text = "设置"

[node name="Separator2" type="HSeparator" parent="MenuPanel/MenuVBox" unique_id=124898724]
layout_mode = 2

[node name="MainMenuButton" type="Button" parent="MenuPanel/MenuVBox" unique_id=124898725]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2
text = "返回主菜单"

[node name="QuitButton" type="Button" parent="MenuPanel/MenuVBox" unique_id=124898726]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2
text = "退出游戏"

[node name="Spacer2" type="Control" parent="MenuPanel/MenuVBox" unique_id=124898727]
custom_minimum_size = Vector2(0, 24)
layout_mode = 2

[node name="MapSettingsPopup" type="PanelContainer" parent="." unique_id=923406112]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -220.0
offset_top = -320.0
offset_right = 220.0
offset_bottom = 320.0
grow_horizontal = 2
grow_vertical = 2

[node name="PopupVBox" type="VBoxContainer" parent="MapSettingsPopup" unique_id=1473199217]
layout_mode = 2
theme_override_constants/separation = 12

[node name="GenerationSettingsLabel" type="Label" parent="MapSettingsPopup/PopupVBox" unique_id=1520088659]
layout_mode = 2
theme_override_font_sizes/font_size = 24
text = "生成设置"
horizontal_alignment = 1

[node name="MapSizeHBox" type="HBoxContainer" parent="MapSettingsPopup/PopupVBox" unique_id=1694065426]
layout_mode = 2
theme_override_constants/separation = 8

[node name="MapWidthLabel" type="Label" parent="MapSettingsPopup/PopupVBox/MapSizeHBox" unique_id=40560217]
layout_mode = 2
text = "宽"

[node name="MapWidthSpinBox" type="SpinBox" parent="MapSettingsPopup/PopupVBox/MapSizeHBox" unique_id=230258629]
custom_minimum_size = Vector2(120, 0)
layout_mode = 2
min_value = 128.0
max_value = 2048.0
step = 64.0
value = 512.0
rounded = true

[node name="MapHeightLabel" type="Label" parent="MapSettingsPopup/PopupVBox/MapSizeHBox" unique_id=2029839740]
layout_mode = 2
text = "高"

[node name="MapHeightSpinBox" type="SpinBox" parent="MapSettingsPopup/PopupVBox/MapSizeHBox" unique_id=314866736]
custom_minimum_size = Vector2(120, 0)
layout_mode = 2
min_value = 128.0
max_value = 2048.0
step = 64.0
value = 512.0
rounded = true

[node name="CellCountHBox" type="HBoxContainer" parent="MapSettingsPopup/PopupVBox" unique_id=1889577010]
layout_mode = 2
theme_override_constants/separation = 8

[node name="CellCountLabel" type="Label" parent="MapSettingsPopup/PopupVBox/CellCountHBox" unique_id=567768939]
layout_mode = 2
text = "单元数量"

[node name="CellCountSpinBox" type="SpinBox" parent="MapSettingsPopup/PopupVBox/CellCountHBox" unique_id=1007578816]
custom_minimum_size = Vector2(160, 0)
layout_mode = 2
min_value = 200.0
max_value = 10000.0
step = 100.0
value = 2000.0
rounded = true

[node name="RiverDensityHBox" type="HBoxContainer" parent="MapSettingsPopup/PopupVBox" unique_id=380100567]
layout_mode = 2
theme_override_constants/separation = 8

[node name="RiverDensityLabel" type="Label" parent="MapSettingsPopup/PopupVBox/RiverDensityHBox" unique_id=2077556712]
layout_mode = 2
text = "河流密集度: 1.00x"

[node name="RiverDensitySlider" type="HSlider" parent="MapSettingsPopup/PopupVBox/RiverDensityHBox" unique_id=620444398]
custom_minimum_size = Vector2(160, 0)
layout_mode = 2
min_value = 0.5
max_value = 2.0
step = 0.05
value = 1.0

[node name="CountrySectionLabel" type="Label" parent="MapSettingsPopup/PopupVBox" unique_id=2021690553]
layout_mode = 2
theme_override_font_sizes/font_size = 18
text = "国家设置"

[node name="CountryCountHBox" type="HBoxContainer" parent="MapSettingsPopup/PopupVBox" unique_id=107113569]
layout_mode = 2
theme_override_constants/separation = 8

[node name="CountryCountLabel" type="Label" parent="MapSettingsPopup/PopupVBox/CountryCountHBox" unique_id=1934346429]
layout_mode = 2
text = "国家数量"

[node name="CountryCountSpinBox" type="SpinBox" parent="MapSettingsPopup/PopupVBox/CountryCountHBox" unique_id=2093294442]
custom_minimum_size = Vector2(160, 0)
layout_mode = 2
min_value = 1.0
max_value = 64.0
value = 12.0
rounded = true

[node name="PopupButtonsHBox" type="HBoxContainer" parent="MapSettingsPopup/PopupVBox" unique_id=1797617169]
layout_mode = 2
theme_override_constants/separation = 12

[node name="ApplyButton" type="Button" parent="MapSettingsPopup/PopupVBox/PopupButtonsHBox" unique_id=1840872074]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
size_flags_horizontal = 3
text = "应用并生成"

[node name="CloseButton" type="Button" parent="MapSettingsPopup/PopupVBox/PopupButtonsHBox" unique_id=1785190959]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
size_flags_horizontal = 3
text = "关闭"

[node name="MapDisplayPanel" type="PanelContainer" parent="." unique_id=655755920]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 20.0
offset_top = -651.0
offset_right = 349.0
offset_bottom = -16.0
grow_horizontal = 0
grow_vertical = 0

[node name="MapDisplayVBox" type="VBoxContainer" parent="MapDisplayPanel" unique_id=328794557]
layout_mode = 2
theme_override_constants/separation = 8

[node name="MapDisplayTitle" type="Label" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1177397484]
layout_mode = 2
theme_override_font_sizes/font_size = 18
text = "地图显示"
horizontal_alignment = 1

[node name="LayerSectionLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox" unique_id=767650400]
layout_mode = 2
text = "图层"

[node name="TerrainLayerCheck" type="CheckButton" parent="MapDisplayPanel/MapDisplayVBox" unique_id=340292676]
layout_mode = 2
button_pressed = true
text = "地形图层"

[node name="CountryLayerCheck" type="CheckButton" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1129155478]
layout_mode = 2
button_pressed = true
text = "国家图层"

[node name="EcologyLayerCheck" type="CheckButton" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1790297336]
layout_mode = 2
button_pressed = true
text = "生态环境图层"

[node name="LayerSeparator" type="HSeparator" parent="MapDisplayPanel/MapDisplayVBox" unique_id=540558810]
layout_mode = 2

[node name="OverlaySectionLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1665093791]
layout_mode = 2
text = "叠加"

[node name="ShowBordersCheck" type="CheckButton" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1078851568]
layout_mode = 2
button_pressed = true
text = "显示边界线"

[node name="CountryBorderWidthHBox" type="HBoxContainer" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1927044004]
layout_mode = 2
theme_override_constants/separation = 8

[node name="CountryBorderWidthLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox/CountryBorderWidthHBox" unique_id=2011490977]
layout_mode = 2
text = "边界粗细: 2.0"

[node name="CountryBorderWidthSlider" type="HSlider" parent="MapDisplayPanel/MapDisplayVBox/CountryBorderWidthHBox" unique_id=962656822]
custom_minimum_size = Vector2(160, 0)
layout_mode = 2
min_value = 0.5
max_value = 6.0
step = 0.1
value = 2.0

[node name="CountryFillAlphaHBox" type="HBoxContainer" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1503080078]
layout_mode = 2
theme_override_constants/separation = 8

[node name="CountryFillAlphaLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox/CountryFillAlphaHBox" unique_id=1893322136]
layout_mode = 2
text = "填充透明度: 0.85"

[node name="CountryFillAlphaSlider" type="HSlider" parent="MapDisplayPanel/MapDisplayVBox/CountryFillAlphaHBox" unique_id=1215453774]
custom_minimum_size = Vector2(160, 0)
layout_mode = 2
min_value = 0.1
max_value = 1.0
step = 0.05
value = 0.85

[node name="CountryBorderColorHBox" type="HBoxContainer" parent="MapDisplayPanel/MapDisplayVBox" unique_id=93443265]
layout_mode = 2
theme_override_constants/separation = 8

[node name="CountryBorderColorLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox/CountryBorderColorHBox" unique_id=1236818036]
layout_mode = 2
text = "边界颜色"

[node name="CountryBorderColorPicker" type="ColorPickerButton" parent="MapDisplayPanel/MapDisplayVBox/CountryBorderColorHBox" unique_id=1609987370]
custom_minimum_size = Vector2(160, 32)
layout_mode = 2
color = Color(0.12, 0.1, 0.08, 0.9)

[node name="ShowRiversCheck" type="CheckButton" parent="MapDisplayPanel/MapDisplayVBox" unique_id=992181972]
layout_mode = 2
button_pressed = true
text = "显示河流"

[node name="ShowNamesCheck" type="CheckButton" parent="MapDisplayPanel/MapDisplayVBox" unique_id=878414711]
layout_mode = 2
button_pressed = true
text = "显示名称"

[node name="ThemeSeparator" type="HSeparator" parent="MapDisplayPanel/MapDisplayVBox" unique_id=389639646]
layout_mode = 2

[node name="ThemeSectionLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1594938325]
layout_mode = 2
text = "主题"

[node name="ThemeSelectorHBox" type="HBoxContainer" parent="MapDisplayPanel/MapDisplayVBox" unique_id=1782857370]
layout_mode = 2
theme_override_constants/separation = 8

[node name="ThemeLabel" type="Label" parent="MapDisplayPanel/MapDisplayVBox/ThemeSelectorHBox" unique_id=1183335996]
layout_mode = 2
text = "样式"

[node name="MapThemeSelector" type="OptionButton" parent="MapDisplayPanel/MapDisplayVBox/ThemeSelectorHBox" unique_id=1540128437]
custom_minimum_size = Vector2(160, 36)
layout_mode = 2

[node name="TopMenu" type="HBoxContainer" parent="." unique_id=508882228]
layout_mode = 1
offset_left = 16.0
offset_top = 16.0
offset_right = 232.0
offset_bottom = 72.0
theme_override_constants/separation = 8

[node name="MapMenuButton" type="Button" parent="TopMenu" unique_id=1111821090]
custom_minimum_size = Vector2(160, 48)
layout_mode = 2
text = "地图"

[node name="MapDropdown" type="PanelContainer" parent="TopMenu/MapMenuButton" unique_id=1063981455]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 4.0
offset_bottom = 98.0
grow_horizontal = 2
grow_vertical = 0
theme_override_styles/panel = SubResource("DropdownPanelStyle")

[node name="DropdownVBox" type="VBoxContainer" parent="TopMenu/MapMenuButton/MapDropdown" unique_id=1180841054]
layout_mode = 2
theme_override_constants/separation = 4

[node name="RegenerateDropdownButton" type="Button" parent="TopMenu/MapMenuButton/MapDropdown/DropdownVBox" unique_id=1689042680]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
text = "重新生成地图"

[node name="MapSettingsDropdownButton" type="Button" parent="TopMenu/MapMenuButton/MapDropdown/DropdownVBox" unique_id=849663256]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
text = "地图设置"

[node name="SystemMenuButton" type="Button" parent="TopMenu" unique_id=1321736896]
custom_minimum_size = Vector2(160, 48)
layout_mode = 2
text = "系统"

[node name="SystemDropdown" type="PanelContainer" parent="TopMenu/SystemMenuButton" unique_id=580454762]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 4.0
offset_bottom = 154.0
grow_horizontal = 2
grow_vertical = 0
theme_override_styles/panel = SubResource("DropdownPanelStyle")

[node name="DropdownVBox" type="VBoxContainer" parent="TopMenu/SystemMenuButton/SystemDropdown" unique_id=1854370281]
layout_mode = 2
theme_override_constants/separation = 4

[node name="SettingsDropdownButton" type="Button" parent="TopMenu/SystemMenuButton/SystemDropdown/DropdownVBox" unique_id=369555488]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
text = "设置"

[node name="MainMenuDropdownButton" type="Button" parent="TopMenu/SystemMenuButton/SystemDropdown/DropdownVBox" unique_id=659647827]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
text = "返回主菜单"

[node name="QuitDropdownButton" type="Button" parent="TopMenu/SystemMenuButton/SystemDropdown/DropdownVBox" unique_id=692267604]
custom_minimum_size = Vector2(0, 40)
layout_mode = 2
text = "退出游戏"
